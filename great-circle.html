<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Maps</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6.5.0/turf.min.js"></script>
    <style>
        #map {
            height: 600px;
            width: 100%;
        }
    </style>
</head>
<body>
    <div>
        <h1>Great Circle Distance Calculator</h1>
        <div>
            <label>Location 1:</label><br>
            <input id="lat1" type="number" placeholder="Latitude 1" min="-90" max="90" step="0.00001" />
            <input id="lng1" type="number" placeholder="Longitude 1" min="-180" max="180" step="0.00001" />
        </div>
        <br>
        <div>
            <label>Location 2:</label><br>
            <input id="lat2" type="number" placeholder="Latitude 2" min="-90" max="90" step="0.00001" />
            <input id="lng2" type="number" placeholder="Longitude 2" min="-180" max="180" step="0.00001" />
        </div>
        <br>
        <button id="drawLine">Draw</button>
        <br/><br/>
        <div id="map"></div>
    </div>

    <script>
        var map = L.map('map').setView([51.505, -0.09], 2);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        function drawGreatCircle(coord1, coord2) {
            var line = turf.lineArc(
                { type: 'Point', coordinates: [coord1.lng, coord1.lat] },
                { type: 'Point', coordinates: [coord2.lng, coord2.lat] },
                500
            );

            var polyline = L.geoJSON(line, {
                style: {
                    color: 'blue',
                    weight: 3
                }
            }).addTo(map);

            map.fitBounds(polyline.getBounds());
        }

        document.getElementById('drawLine').onclick = function () {
            // Get latitude and longitude inputs
            var lat1 = parseFloat(document.getElementById('lat1').value);
            var lng1 = parseFloat(document.getElementById('lng1').value);
            var lat2 = parseFloat(document.getElementById('lat2').value);
            var lng2 = parseFloat(document.getElementById('lng2').value);

            // Validate inputs
            if (isNaN(lat1) || isNaN(lng1) || isNaN(lat2) || isNaN(lng2)) {
                alert("Please enter valid numbers for all latitude and longitude values.");
                return;
            }

            // Create coordinates and draw the great circle
            var coord1 = { lat: lat1, lng: lng1 };
            var coord2 = { lat: lat2, lng: lng2 };
            drawGreatCircle(coord1, coord2);
        };
    </script>
</body>
</html>
